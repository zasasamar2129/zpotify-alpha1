#!/bin/bash

#!/bin/bash
clear

# Define colors
BLUE="\033[1;34m"
YELLOW="\033[1;33m"
GREEN="\033[1;32m"
NC="\033[0m"  # No Color
RED="\033[1;31m"
#!/bin/bash
clear

# Define colors
BLUE="\033[1;34m"
YELLOW="\033[1;33m"
GREEN="\033[1;32m"
NC="\033[0m"  # No Color

# Display banner
echo -e "$BLUE"
echo "╔══════════════════════════════════════════╗"
echo "║                                          ║"
echo "║  ██   ██ ███████ ██      ██      ██████  ║"
echo "║  ██   ██ ██      ██      ██     ██    ██ ║"
echo "║  ███████ █████   ██      ██     ██    ██ ║"
echo "║  ██   ██ ██      ██      ██     ██    ██ ║"
echo "║  ██   ██ ███████ ███████ ███████ ██████  ║"
echo "║                                          ║"
echo "║      Z A C O   B O T   S Y S T E M       ║"
echo "║                                          ║"
echo "╚══════════════════════════════════════════╝"
echo -e "$NC"

# Function to ask for confirmation
ask_confirm() {
    local prompt=$1
    read -p "$(echo -e "$prompt [y/N] ")" -n 1 -r
    echo
    [[ $REPLY =~ ^[Yy]$ ]]
}
# Safe confirmation function
confirm() {
    while true; do
        read -rp "$(echo -e "${YELLOW}$1 [y/N] ${NC}")" yn
        case $yn in
            [Yy]* ) return 0;;
            [Nn]* ) return 1;;
            * ) echo -e "${RED}Please answer y or n${NC}";;
        esac
    done
}

# System update
if confirm "Update system packages?"; then
    echo -e "${YELLOW}[*] Updating packages...${NC}"
    sudo apt update && sudo apt upgrade -y
    sudo apt install -y git ffmpeg python3 python3-pip
    echo -e "${GREEN}[✓] System updated${NC}"
    read -n 1 -s -r -p $'\033[1;33mPress any key to continue...\033[0m'
    echo
fi

# Requirements installation
if confirm "Install Python requirements?"; then
    echo -e "${YELLOW}[*] Installing requirements...${NC}"
    pip3 install -r requirements.txt
    pip3 install -r Web-admin/requirements.txt
    pip3 install -r mbot/pirate/requirements.txt
    echo -e "${GREEN}[✓] Requirements installed${NC}"
    read -n 1 -s -r -p $'\033[1;33mPress any key to continue...\033[0m'
    echo
fi

# Environment setup
if confirm "Verify environment files?"; then
    echo -e "${YELLOW}[*] Checking configuration...${NC}"
    
    # Check main bot config
    if [ -f "config.env" ]; then
        echo -e "${GREEN}[✓] Main bot config found${NC}"
    else
        echo -e "${RED}[×] Missing: config.env${NC}"
    fi
    
    # Check web admin config
    if [ -f "Web-admin/config.py" ]; then
        echo -e "${GREEN}[✓] Web admin config found${NC}"
    else
        echo -e "${RED}[×] Missing: Web-admin/config.py${NC}"
    fi
    
    # Check sub-bot config
    if [ -f "mbot/pirate/.env" ]; then
        echo -e "${GREEN}[✓] Sub-bot config found${NC}"
    else
        echo -e "${RED}[×] Missing: mbot/pirate/.env${NC}"
    fi
    
    read -n 1 -s -r -p $'\033[1;33mPress any key to continue...\033[0m'
    echo
fi

echo -e "\n${GREEN}Setup complete! Run ./start.sh to launch${NC}"
echo -e "\nYour Username: ${YELLOW}admin${NC}"
echo -e "\nYour Password: ${RED}admin${NC}"